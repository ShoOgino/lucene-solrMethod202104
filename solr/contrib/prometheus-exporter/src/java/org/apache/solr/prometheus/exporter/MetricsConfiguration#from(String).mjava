  public static MetricsConfiguration from(String resource) throws Exception {

    // See solr-core XmlConfigFile
    final DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {
      dbf.setXIncludeAware(true);
      dbf.setNamespaceAware(true);
    } catch (UnsupportedOperationException e) {
      log.warn("{} XML parser doesn't support XInclude option", resource);
    }

    Document document;
    Path path = Path.of(resource);
    if (Files.exists(path)) {
      document = dbf.newDocumentBuilder().parse(path.toUri().toASCIIString());
    } else {
      try (InputStream configInputStream = MethodHandles.lookup().lookupClass().getClassLoader().getResourceAsStream(resource.replace(File.separatorChar, '/'))) {
        document = dbf.newDocumentBuilder().parse(configInputStream);
      }
    }

    return from(document);
  }

