  /**
   * Syntactic sugar to allow a single change to the cluster state to be made in a single call.
   */
  public void doSingleStateUpdate(MutatingCommand command, ZkNodeProps message,
                                  SolrCloudManager scm, ZkStateReader zkStateReader) throws KeeperException, InterruptedException {
    if (!useDistributedStateUpdate) {
      throw new IllegalStateException("Not expecting to execute doSingleStateUpdate when not using distributed state update");
    }
    String collectionName = command.getCollectionName(message);
    final StateChangeRecorder scr = new StateChangeRecorder(collectionName, command.isCollectionCreation());
    scr.record(command, message);
    scr.executeStateUpdates(scm, zkStateReader);
  }

