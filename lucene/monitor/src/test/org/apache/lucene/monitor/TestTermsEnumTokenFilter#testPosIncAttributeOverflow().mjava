  public void testPosIncAttributeOverflow() throws IOException {

    final BytesRef foo = new BytesRef("foo");
    final BytesRef bar = new BytesRef("bar");

    BytesRefIterator terms =
        new BytesRefIterator() {

          long count = 1000;

          @Override
          public BytesRef next() throws IOException {
            if (count-- > 100) return foo;
            if (count-- > 0) return bar;
            return null;
          }
        };

    try (TokenStream ts = new LeapfrogTokenFilter(new TermsEnumTokenStream(terms))) {
      while (ts.incrementToken()) {
        // This tight loop will throw an exception if clearAttributes() is not called
        // by TermsEnumTokenStream.  See issue #46
      }
    }
  }

