  public ZkWriteCommand(String name, DocCollection collection, PerReplicaStatesOps replicaOps, boolean persistJsonState) {
    isPerReplicaStateCollection = collection != null && collection.isPerReplicaState();
    this.name = name;
    this.collection = collection;
    this.ops = replicaOps;
    this.persistJsonState = persistJsonState || !isPerReplicaStateCollection; // Always persist for non "per replica state" collections
  }

