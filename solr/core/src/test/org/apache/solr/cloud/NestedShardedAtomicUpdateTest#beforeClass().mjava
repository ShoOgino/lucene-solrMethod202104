  @BeforeClass
  public static void beforeClass() throws Exception {
    configureCluster(1)
        .addConfig("_default", configset("cloud-minimal"))
        .configure();
    // replace schema.xml with schema-test.xml
    Path schemaPath = Paths.get(TEST_HOME()).resolve("collection1").resolve("conf").resolve("schema-nest.xml");
    cluster.getZkClient().setData("/configs/_default/schema.xml", schemaPath.toFile(),true);

    cloudClient = cluster.getSolrClient();
    cloudClient.setDefaultCollection(DEFAULT_COLLECTION);

    CollectionAdminRequest.createCollection(DEFAULT_COLLECTION, 4, 1)
        .process(cloudClient);

    clients = new ArrayList<>();
    ClusterState clusterState = cloudClient.getClusterStateProvider().getClusterState();
    for (Replica replica : clusterState.getCollection(DEFAULT_COLLECTION).getReplicas()) {
      clients.add(getHttpSolrClient(replica.getCoreUrl()));
    }
  }

