  @After
  public void afterTest() throws Exception {
    if (null == metricManager) {
      return; // test failed to init, nothing to cleanup
    }
    metricManager.closeReporters(coreMetricManager.getRegistryName());
    Set<ObjectInstance> objects =
        mBeanServer.queryMBeans(ObjectName.getInstance(domain + ":*"), null);
    assertTrue(objects.isEmpty());

    coreMetricManager.close();
    deleteCore();
  }

