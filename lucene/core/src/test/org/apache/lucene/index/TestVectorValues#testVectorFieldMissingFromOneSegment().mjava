  public void testVectorFieldMissingFromOneSegment() throws Exception {
    try (Directory dir = FSDirectory.open(createTempDir());
        IndexWriter w = new IndexWriter(dir, createIndexWriterConfig())) {
      Document doc = new Document();
      doc.add(new StringField("id", "0", Store.NO));
      doc.add(
          new VectorField(
              "v0", new float[] {2, 3, 5}, VectorValues.SearchStrategy.DOT_PRODUCT_HNSW));
      w.addDocument(doc);
      w.commit();

      doc = new Document();
      doc.add(
          new VectorField(
              "v1", new float[] {2, 3, 5}, VectorValues.SearchStrategy.DOT_PRODUCT_HNSW));
      w.addDocument(doc);
      w.forceMerge(1);
    }
  }

