  /**
   * Analysis chains that make use of flags may or may not want flags transferred to the synonym to
   * be created. This tests the mask that can be used to control which flag bits are transferred.
   */
  public void testFlagMask() throws Exception {

    Token token = new Token("foo", 0, 2);
    token.setType("bar");
    token.setFlags(7);
    Token token2 = new Token("foo", 4, 6);
    TokenStream ts = new CannedTokenStream(token, token2);

    ts = new TypeAsSynonymFilter(ts, "", Collections.emptySet(), 5);

    // "word" is the default type!
    assertTokenStreamContents(
        ts,
        new String[] {"foo", "bar", "foo", "word"},
        new int[] {0, 0, 4, 4},
        new int[] {2, 2, 6, 6},
        null, // not testing types
        null,
        null, // positions tested above
        // final values, keywords, graph, payloads not tested here
        null,
        null,
        null,
        false,
        null,
        new int[] {7, 5, 0, 0});
  }

