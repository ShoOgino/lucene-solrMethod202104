    @Override
    public void seek(long pos) throws IOException {
      if (pos != getFilePointer()) {
        final long alignedPos = pos - (pos % blockSize);
        filePos = alignedPos - buffer.capacity();

        final int delta = (int) (pos - alignedPos);
        refill();
        try {
          buffer.position(delta);
        } catch (IllegalArgumentException iae) {
          throw new EOFException("read past EOF: " + this);
        }
      }
      assert pos == getFilePointer();
    }

