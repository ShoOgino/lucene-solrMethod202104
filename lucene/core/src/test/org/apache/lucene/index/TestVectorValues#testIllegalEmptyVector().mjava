  public void testIllegalEmptyVector() throws Exception {
    try (Directory dir = newDirectory();
        IndexWriter w = new IndexWriter(dir, createIndexWriterConfig())) {
      Document doc = new Document();
      Exception e =
          expectThrows(
              IllegalArgumentException.class,
              () -> doc.add(new VectorField("f", new float[0], SearchStrategy.NONE)));
      assertEquals("cannot index an empty vector", e.getMessage());

      Document doc2 = new Document();
      doc2.add(new VectorField("f", new float[1], VectorValues.SearchStrategy.NONE));
      w.addDocument(doc2);
    }
  }

