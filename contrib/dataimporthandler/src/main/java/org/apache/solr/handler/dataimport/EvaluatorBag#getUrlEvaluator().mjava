  /**
   * <p/>
   * Returns an <code>Evaluator</code> instance capable of URL-encoding
   * expressions. The expressions are evaluated using a
   * <code>VariableResolver</code>
   * </p>
   *
   * @return an <code>Evaluator</code> instance capable of URL-encoding
   *         expressions.
   */
  public static Evaluator getUrlEvaluator() {
    return new Evaluator() {
      public String evaluate(String expression, Context context) {
        Object value = null;
        try {
          value = context.getVariableResolver().resolve(expression);
          if (value == null)
            return null;

          return URLEncoder.encode(value.toString(), "UTF-8");
        } catch (UnsupportedEncodingException e) {
          throw new DataImportHandlerException(
                  DataImportHandlerException.SEVERE,
                  "Unable to encode expression: " + expression + " with value: "
                          + value, e);
        }
      }
    };
  }

