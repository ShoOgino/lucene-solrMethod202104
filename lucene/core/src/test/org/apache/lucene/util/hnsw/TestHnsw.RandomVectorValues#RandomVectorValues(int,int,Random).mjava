    RandomVectorValues(int size, int dimension, Random random) {
      this.dimension = dimension;
      values = new float[size][];
      denseValues = new float[size][];
      scratch = new float[dimension];
      int sz = 0;
      int md = -1;
      for (int offset = 0; offset < size; offset += random.nextInt(3) + 1) {
        values[offset] = randomVector(random, dimension);
        denseValues[sz++] = values[offset];
        md = offset;
      }
      numVectors = sz;
      maxDoc = md;
      // get a random SearchStrategy other than NONE (0)
      searchStrategy = SearchStrategy.values()[random.nextInt(SearchStrategy.values().length - 1) + 1];
    }

