  private void processFST(FST<IntsRef> fst, BiConsumer<IntsRef, IntsRef> keyValueConsumer) {
    if (fst == null) return;
    try {
      IntsRefFSTEnum<IntsRef> fstEnum = new IntsRefFSTEnum<>(fst);
      IntsRefFSTEnum.InputOutput<IntsRef> mapping;
      while ((mapping = fstEnum.next()) != null) {
        speller.checkCanceled.run();
        keyValueConsumer.accept(mapping.input, mapping.output);
      }
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }

