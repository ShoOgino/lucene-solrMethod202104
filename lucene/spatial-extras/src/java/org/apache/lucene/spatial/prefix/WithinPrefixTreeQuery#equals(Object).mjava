  @Override
  public boolean equals(Object o) {
    if (!super.equals(o)) {
      return false; // checks getClass == o.getClass & instanceof
    }

    WithinPrefixTreeQuery that = (WithinPrefixTreeQuery) o;

    if (bufferedQueryShape != null
        ? !bufferedQueryShape.equals(that.bufferedQueryShape)
        : that.bufferedQueryShape != null) {
      return false;
    }

    return true;
  }

