    protected void corruptIndexFiles() throws IOException {
        Collection<Slice> slices = getCollectionState(getCollectionName()).getSlices();
        Slice slice = slices.iterator().next();
        JettySolrRunner leaderNode = cluster.getReplicaJetty(slice.getLeader());

        SolrCore solrCore = leaderNode.getCoreContainer().getCore(slice.getLeader().getCoreName());
        Set<String> fileNames = new HashSet<>(solrCore.getDeletionPolicy().getLatestCommit().getFileNames());
        File indexFolder = new File(solrCore.getIndexDir());
        File fileGetCorrupted = Stream.of(Objects.requireNonNull(indexFolder.listFiles()))
                .filter(x -> fileNames.contains(x.getName()))
                .findAny().get();
        try (FileInputStream fis = new FileInputStream(fileGetCorrupted)){
            byte[] contents = IOUtils.readFully(fis, (int) fileGetCorrupted.length());
            contents[contents.length - CodecUtil.footerLength() - 1] += 1;
            contents[contents.length - CodecUtil.footerLength() - 2] += 1;
            contents[contents.length - CodecUtil.footerLength() - 3] += 1;
            contents[contents.length - CodecUtil.footerLength() - 4] += 1;
            try (FileOutputStream fos = new FileOutputStream(fileGetCorrupted)) {
                IOUtils.write(contents, fos);
            }
        } finally {
            solrCore.close();
        }
    }

