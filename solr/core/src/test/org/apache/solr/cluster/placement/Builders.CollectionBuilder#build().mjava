    public SolrCollection build() {
      ClusterAbstractionsForTest.SolrCollectionImpl solrCollection = new ClusterAbstractionsForTest.SolrCollectionImpl(collectionName, customProperties);

      final LinkedHashMap<String, Shard> shards = new LinkedHashMap<>();

      for (ShardBuilder shardBuilder : shardBuilders) {
        Shard shard = shardBuilder.build(solrCollection);
        shards.put(shard.getShardName(), shard);
      }

      solrCollection.setShards(shards);
      return solrCollection;
    }

