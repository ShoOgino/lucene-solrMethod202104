  /**
   * Ensure that terms are higher than some replica's terms. If the current leader is attempting to give up
   * leadership and included in replicasNeedingRecovery, then other replicas that are in sync will have higher
   * terms, while the leader will stay where it is.
   * @param leader coreNodeName of leader
   * @param replicasNeedingRecovery set of replicas in which their terms should be lower than leader's term
   */
  public void ensureTermsIsHigher(String leader, Set<String> replicasNeedingRecovery) {
    if (replicasNeedingRecovery.isEmpty()) return;
    mutate(terms -> terms.increaseTerms(leader, replicasNeedingRecovery));
  }

