  @Override
  public <T extends AcceptingVisitor> void visit(String key, AttrObject<T> attr) {
    ifKeyExists(key, (path, value) -> {
      if (value == null) {
        attr.set(null);
      } else {
        T t = safeCast(classToInstance.apply(value), key, attr.getInterfaceClass());
        attr.set(t);
      }
    });

    T t = attr.get();
    if (t != null) {
      withKey(key, path -> {
        t.accept(this);
      });
    }
  }

