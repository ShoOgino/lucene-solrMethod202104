  /**
   * Writes {@link IndexFileNames#SEGMENTS_GEN} file to the directory, reading
   * the generation from the given {@code segmentsFile}. If it is {@code null},
   * this method deletes segments.gen from the directory.
   */
  public static void writeSegmentsGen(String segmentsFile, Directory dir) {
    if (segmentsFile != null) {
      SegmentInfos.writeSegmentsGen(dir, SegmentInfos.generationFromSegmentsFileName(segmentsFile));
    } else {
      IOUtils.deleteFilesIgnoringExceptions(dir, IndexFileNames.SEGMENTS_GEN);
    }
  }

