  @Test
  public void testAtomicUpdateRemovalOfIntField() throws Exception {
    ensureFieldHasValues(COMMITTED_DOC_ID, "count_is", 1, 2);
    atomicRemoveValueFromField(COMMITTED_DOC_ID, "count_is", 1);
    ensureFieldHasValues(COMMITTED_DOC_ID, "count_is", 2);

    ensureFieldHasValues(UNCOMMITTED_DOC_ID, "count_is", 1, 2);
    atomicRemoveValueFromField(UNCOMMITTED_DOC_ID, "count_is", 1);
    ensureFieldHasValues(UNCOMMITTED_DOC_ID, "count_is", 2);
  }

