  public void testToInternal() throws Exception {
    assertFormatParsed("1995-12-31T23:59:59.999", "1995-12-31T23:59:59.999666Z");
    assertFormatParsed("1995-12-31T23:59:59.999", "1995-12-31T23:59:59.999Z");
    assertFormatParsed("1995-12-31T23:59:59.99", "1995-12-31T23:59:59.99Z");
    assertFormatParsed("1995-12-31T23:59:59.9", "1995-12-31T23:59:59.9Z");
    assertFormatParsed("1995-12-31T23:59:59", "1995-12-31T23:59:59Z");

    // here the input isn't in the canonical form, but we should be forgiving
    assertFormatParsed("1995-12-31T23:59:59.99", "1995-12-31T23:59:59.990Z");
    assertFormatParsed("1995-12-31T23:59:59.9", "1995-12-31T23:59:59.900Z");
    assertFormatParsed("1995-12-31T23:59:59.9", "1995-12-31T23:59:59.90Z");
    assertFormatParsed("1995-12-31T23:59:59", "1995-12-31T23:59:59.000Z");
    assertFormatParsed("1995-12-31T23:59:59", "1995-12-31T23:59:59.00Z");
    assertFormatParsed("1995-12-31T23:59:59", "1995-12-31T23:59:59.0Z");

    // kind of kludgy, but we have other tests for the actual date math
    assertFormatParsed(DateFormatUtil.formatDate(p.parseMath("/DAY")), "NOW/DAY");

    // as of Solr 1.3
    assertFormatParsed("1995-12-31T00:00:00", "1995-12-31T23:59:59Z/DAY");
    assertFormatParsed("1995-12-31T00:00:00", "1995-12-31T23:59:59.123Z/DAY");
    assertFormatParsed("1995-12-31T00:00:00", "1995-12-31T23:59:59.123999Z/DAY");
  }

