  public void testAddIndexesDirectory1() throws Exception {
    String fieldName = "field";
    Document doc = new Document();
    try (Directory dir = newDirectory();
         Directory dir2 = newDirectory()) {
      try (IndexWriter w = new IndexWriter(dir, createIndexWriterConfig())) {
        w.addDocument(doc);
      }
      doc.add(new VectorField(fieldName, new float[4], VectorValues.SearchStrategy.DOT_PRODUCT_HNSW));
      try (IndexWriter w2 = new IndexWriter(dir2, createIndexWriterConfig())) {
        w2.addDocument(doc);
        w2.addIndexes(new Directory[]{dir});
        try (IndexReader reader = w2.getReader()) {
          LeafReader r = reader.leaves().get(0).reader();
          VectorValues vectorValues = r.getVectorValues(fieldName);
          assertEquals(0, vectorValues.nextDoc());
          assertEquals(0, vectorValues.vectorValue()[0], 0);
          assertEquals(NO_MORE_DOCS, vectorValues.nextDoc());
        }
      }
    }
  }

