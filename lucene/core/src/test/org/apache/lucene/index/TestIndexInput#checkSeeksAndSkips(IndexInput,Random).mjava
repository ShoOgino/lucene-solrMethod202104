  private void checkSeeksAndSkips(IndexInput is, Random random) throws IOException {
    long len = is.length();

    int iterations = LuceneTestCase.TEST_NIGHTLY ? 1_000 : 10;
    for (int i = 0; i < iterations; i++) {
      is.seek(0); // make sure we're at the start

      for (long curr = 0; curr < len; ) {
        long maxSkipTo = len - 1;
        // if we're close to the end, just skip all the way
        long skipTo = (len - curr < 10) ? maxSkipTo : TestUtil.nextLong(random, curr, maxSkipTo);
        long skipDelta = skipTo - curr;

        // first reposition using seek
        byte startByte1 = is.readByte();
        is.seek(skipTo);
        byte endByte1 = is.readByte();

        // do the same thing but with skipBytes
        is.seek(curr);
        byte startByte2 = is.readByte();
        is.seek(curr);
        is.skipBytes(skipDelta);
        byte endByte2 = is.readByte();

        assertEquals(startByte1, startByte2);
        assertEquals(endByte1, endByte2);
        // +1 since we read the byte we seek/skip to
        assertEquals(curr + skipDelta + 1, is.getFilePointer());

        curr = is.getFilePointer();
      }
    }
  }

