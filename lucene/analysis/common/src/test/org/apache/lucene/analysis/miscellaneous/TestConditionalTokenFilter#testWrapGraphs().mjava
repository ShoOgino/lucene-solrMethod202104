  public void testWrapGraphs() throws Exception {

    TokenStream stream = whitespaceMockTokenizer("a b c d e");

    SynonymMap sm;
    try (Analyzer analyzer = new MockAnalyzer(random())) {
      SolrSynonymParser parser = new SolrSynonymParser(true, true, analyzer);
      parser.parse(new StringReader("a b, f\nc d, g"));
      sm = parser.build();
    }

    TokenStream ts =
        new SkipMatchingFilter(stream, in -> new SynonymGraphFilter(in, sm, true), "c");

    assertTokenStreamContents(
        ts,
        new String[] {"f", "a", "b", "c", "d", "e"},
        null,
        null,
        null,
        new int[] {1, 0, 1, 1, 1, 1},
        new int[] {2, 1, 1, 1, 1, 1});
  }

