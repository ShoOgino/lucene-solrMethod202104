  private PosState getPosition(int pos) {
    return positions[pos-posShift];
  }

