  /**
   * Half-width katakana forms normalized to standard katakana. A bit trickier in some cases, since
   * half-width forms are decomposed and voice marks need to be recombined with a preceding base
   * form.
   */
  public void testHalfWidthKana() throws IOException {
    CharFilter reader = new CJKWidthCharFilter(new StringReader("ｶﾀｶﾅ"));
    TokenStream ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"カタカナ"}, new int[] {0}, new int[] {4}, 4);

    reader = new CJKWidthCharFilter(new StringReader("ｳﾞｨｯﾂ"));
    ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"ヴィッツ"}, new int[] {0}, new int[] {5}, 5);

    reader = new CJKWidthCharFilter(new StringReader("ﾊﾟﾅｿﾆｯｸ"));
    ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"パナソニック"}, new int[] {0}, new int[] {7}, 7);

    reader = new CJKWidthCharFilter(new StringReader("ｳﾞｨｯﾂ ﾊﾟﾅｿﾆｯｸ"));
    ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(
        ts, new String[] {"ヴィッツ", "パナソニック"}, new int[] {0, 6}, new int[] {5, 13}, 13);
  }

