    @Test
    public void testCreateCollectionAllProperties() throws Exception {
        final SolrParams v1Params = captureConvertedV1Params("/collections", "POST",
                "{'create': {" +
                        "'name': 'techproducts', " +
                        "'config':'_default', " +
                        "'router': {'name': 'composite', 'field': 'routeField', 'foo': 'bar'}, " +
                        "'shards': 'customShardName,anotherCustomShardName', " +
                        "'replicationFactor': 3," +
                        "'nrtReplicas': 1, " +
                        "'tlogReplicas': 1, " +
                        "'pullReplicas': 1, " +
                        "'nodeSet': ['localhost:8983_solr', 'localhost:7574_solr']," +
                        "'shuffleNodes': true," +
                        "'properties': {'foo': 'bar', 'foo2': 'bar2'}, " +
                        "'async': 'requestTrackingId', " +
                        "'waitForFinalState': false, " +
                        "'perReplicaState': false," +
                        "'numShards': 1}}");

        assertEquals(CollectionParams.CollectionAction.CREATE.lowerName, v1Params.get(ACTION));
        assertEquals("techproducts", v1Params.get(CommonParams.NAME));
        assertEquals("_default", v1Params.get(CollectionAdminParams.COLL_CONF));
        assertEquals("composite", v1Params.get("router.name"));
        assertEquals("routeField", v1Params.get("router.field"));
        assertEquals("bar", v1Params.get("router.foo"));
        assertEquals("customShardName,anotherCustomShardName", v1Params.get(ShardParams.SHARDS));
        assertEquals(3, v1Params.getPrimitiveInt(ZkStateReader.REPLICATION_FACTOR));
        assertEquals(1, v1Params.getPrimitiveInt(ZkStateReader.NRT_REPLICAS));
        assertEquals(1, v1Params.getPrimitiveInt(ZkStateReader.TLOG_REPLICAS));
        assertEquals(1, v1Params.getPrimitiveInt(ZkStateReader.PULL_REPLICAS));
        assertEquals("localhost:8983_solr,localhost:7574_solr", v1Params.get(CollectionAdminParams.CREATE_NODE_SET_PARAM));
        assertEquals(true, v1Params.getPrimitiveBool(CollectionAdminParams.CREATE_NODE_SET_SHUFFLE_PARAM));
        assertEquals("bar", v1Params.get("property.foo"));
        assertEquals("bar2", v1Params.get("property.foo2"));
        assertEquals("requestTrackingId", v1Params.get(CommonAdminParams.ASYNC));
        assertEquals(false, v1Params.getPrimitiveBool(CommonAdminParams.WAIT_FOR_FINAL_STATE));
        assertEquals(false, v1Params.getPrimitiveBool(DocCollection.PER_REPLICA_STATE));
        assertEquals(1, v1Params.getPrimitiveInt(CollectionAdminParams.NUM_SHARDS));
    }

