    public Similarity get(String field) {
      return new DefaultSimilarity() {
    
        // TODO: Remove warning after API has been finalized
        @Override
        public float scorePayload(int docId, int start, int end, byte[] payload, int offset, int length) {
          //we know it is size 4 here, so ignore the offset/length
          return payload[offset];
        }

        //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        //Make everything else 1 so we see the effect of the payload
        //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        @Override
        public float computeNorm(FieldInvertState state) {
          return state.getBoost();
        }

        @Override
        public float sloppyFreq(int distance) {
          return 1;
        }

        @Override
        public float idf(int docFreq, int numDocs) {
          return 1;
        }

        @Override
        public float tf(float freq) {
          return freq == 0 ? 0 : 1;
        }
      };
    }

