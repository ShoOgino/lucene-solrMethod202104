  private static List<NamedList<Object>> documentsToNamedList(List<InputDocument> documents) {
    return documents.stream()
        .map(doc -> {
          NamedList<Object> docProps = new SimpleOrderedMap<>();
          docProps.add("id", doc.getId());
          docProps.add("language", doc.language());
          doc.visitFields(docProps::add);
          return docProps;
        })
        .collect(Collectors.toList());
  }

