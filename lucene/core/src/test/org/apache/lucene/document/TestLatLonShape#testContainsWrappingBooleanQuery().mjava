  public void testContainsWrappingBooleanQuery() throws Exception {

    double[] lats = new double[] {-30, -30, 30, 30, -30};
    double[] lons = new double[] {-30, 30, 30, -30, -30};
    Polygon polygon = new Polygon(lats, lons);

    Directory dir = newDirectory();
    RandomIndexWriter writer = new RandomIndexWriter(random(), dir);
    Document document = new Document();
    addPolygonsToDoc(FIELDNAME, document, polygon);
    writer.addDocument(document);

    //// search
    IndexReader r = writer.getReader();
    writer.close();
    IndexSearcher s = newSearcher(r);

    LatLonGeometry[] geometries = new LatLonGeometry[] {new Rectangle(0, 1, 0, 1), new Point(4, 4)};
    // geometries within the polygon
    Query q = LatLonShape.newGeometryQuery(FIELDNAME, QueryRelation.CONTAINS, geometries);
    TopDocs topDocs = s.search(q, 1);
    assertEquals(1, topDocs.scoreDocs.length);
    assertEquals(1.0, topDocs.scoreDocs[0].score, 0.0);
    IOUtils.close(r, dir);
  }

