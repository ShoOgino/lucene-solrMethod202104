    public ReplicaMetrics build() {
      return new ReplicaMetrics() {
        @Override
        public String getReplicaName() {
          return replicaName;
        }

        @Override
        @SuppressWarnings("unchecked")
        public <T> Optional<T> getReplicaMetric(ReplicaMetric<T> metric) {
          return Optional.ofNullable((T) metrics.get(metric));
        }

        @Override
        public Iterator<Map.Entry<ReplicaMetric<?>, Object>> iterator() {
          return metrics.entrySet().iterator();
        }
      };
    }

