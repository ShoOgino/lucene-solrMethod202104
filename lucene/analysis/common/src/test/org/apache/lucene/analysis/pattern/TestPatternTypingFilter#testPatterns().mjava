  /** Test the straight forward cases. When all flags match the token should be dropped */
  public void testPatterns() throws Exception {

    Token tokenA1 = new Token("One", 0, 2);
    Token tokenA2 = new Token("401(k)", 4, 9);
    Token tokenA3 = new Token("two", 11, 13);
    Token tokenB1 = new Token("three", 15, 19);
    Token tokenB2 = new Token("401k", 21, 24);

    TokenStream ts = new CannedTokenStream(tokenA1, tokenA2, tokenA3, tokenB1, tokenB2);

    // 2 ^(\d+)\(?([a-z])\)?$ ::: legal2_$1_$2
    ts =
        new PatternTypingFilter(
            ts,
            new PatternTypingRule(Pattern.compile("^(\\d+)\\(?([a-z])\\)?$"), 2, "legal2_$1_$2"));

    assertTokenStreamContents(
        ts,
        new String[] {"One", "401(k)", "two", "three", "401k"},
        null,
        null,
        new String[] {"word", "legal2_401_k", "word", "word", "legal2_401_k"},
        null,
        null,
        null,
        null,
        null,
        false,
        null,
        new int[] {0, 2, 0, 0, 2});
  }

