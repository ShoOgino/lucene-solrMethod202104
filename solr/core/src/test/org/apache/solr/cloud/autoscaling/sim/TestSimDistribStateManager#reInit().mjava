  private void reInit() throws Exception {
    if (stateManager != null) {
      stateManager.close();
    }
    if (simulated) {
      stateManager = new SimDistribStateManager(root);
    } else {
      if (solrZkClient != null) {
        solrZkClient.close();
      }
      solrZkClient = new SolrZkClient(zkTestServer.getZkHost(), 30000);
      stateManager = new ZkDistribStateManager(solrZkClient);
    }
    if (log.isInfoEnabled()) {
      log.info("Using {}", stateManager.getClass().getName());
    }
  }

