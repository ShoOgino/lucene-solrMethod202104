  private void doSuggest(
      String word, WordCase wordCase, LinkedHashSet<String> suggestions, Runnable checkCanceled) {
    Hunspell suggestionSpeller =
        new Hunspell(dictionary, policy, checkCanceled) {
          @Override
          boolean acceptsStem(int formID) {
            return !dictionary.hasFlag(formID, dictionary.noSuggest)
                && !dictionary.hasFlag(formID, dictionary.subStandard);
          }
        };
    ModifyingSuggester modifier = new ModifyingSuggester(suggestionSpeller, suggestions);
    boolean hasGoodSuggestions = modifier.suggest(word, wordCase);

    if (!hasGoodSuggestions && dictionary.maxNGramSuggestions > 0) {
      suggestions.addAll(
          new GeneratingSuggester(suggestionSpeller)
              .suggest(dictionary.toLowerCase(word), wordCase, suggestions));
    }

    if (word.contains("-") && suggestions.stream().noneMatch(s -> s.contains("-"))) {
      suggestions.addAll(modifyChunksBetweenDashes(word));
    }
  }

