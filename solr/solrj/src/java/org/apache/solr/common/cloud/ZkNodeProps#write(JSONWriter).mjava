  @Override
  public void write(JSONWriter jsonWriter) {
    // don't write out the base_url if we have a node_name
    if (propMap.containsKey(ZkStateReader.BASE_URL_PROP) && propMap.containsKey(ZkStateReader.NODE_NAME_PROP)) {
      final Map<String,Object> filtered = new HashMap<>();
      // stream / collect is no good here as the Collector doesn't like null values
      propMap.forEach((key, value) -> {
        if (!ZkStateReader.BASE_URL_PROP.equals(key)) {
          filtered.put(key, value);
        }
      });
      jsonWriter.write(filtered);
    } else {
      jsonWriter.write(propMap);
    }
  }

