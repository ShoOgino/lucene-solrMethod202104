  /**
   * The first stage of a 2-phase commit. Implementations should do as much work as possible in this
   * method, but avoid actual committing changes. If the 2-phase commit fails, {@link #rollback()}
   * is called to discard all changes since last successful commit.
   */
  public long prepareCommit() throws IOException;

