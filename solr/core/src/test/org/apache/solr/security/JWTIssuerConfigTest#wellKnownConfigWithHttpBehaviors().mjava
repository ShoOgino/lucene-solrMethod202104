  @Test
  public void wellKnownConfigWithHttpBehaviors() {
    SolrException e = expectThrows(SolrException.class, () -> JWTIssuerConfig.WellKnownDiscoveryConfig.parse("http://127.0.0.1:45678/.well-known/config"));
    assertEquals(400, e.code());
    assertEquals("wellKnownUrl is using http protocol. HTTPS required for IDP communication. Please use SSL or start your nodes with -Dsolr.auth.jwt.allowOutboundHttp=true to allow HTTP for test purposes.", e.getMessage());
    
    JWTIssuerConfig.ALLOW_OUTBOUND_HTTP = true;
    
    e = expectThrows(SolrException.class, () -> JWTIssuerConfig.WellKnownDiscoveryConfig.parse("http://127.0.0.1:45678/.well-known/config"));
    assertEquals(500, e.code());
    // We open a connection in the code path to a server that doesn't exist, which causes this.  Should really be mocked.
    assertEquals("Well-known config could not be read from url http://127.0.0.1:45678/.well-known/config", e.getMessage());
    
            

  }

