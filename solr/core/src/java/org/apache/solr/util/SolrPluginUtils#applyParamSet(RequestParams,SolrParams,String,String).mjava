  private static SolrParams applyParamSet(RequestParams requestParams,
                                          SolrParams defaults, String paramSets, String type) {
    if (paramSets == null) return defaults;
    for (String name : StrUtils.splitSmart(paramSets, ',')) {
      RequestParams.VersionedParams params = requestParams.getParams(name, type);
      if (type.equals(DEFAULTS)) {
        defaults = SolrParams.wrapDefaults(params, defaults);
      } else if (type.equals(INVARIANTS)) {
        defaults = SolrParams.wrapAppended(params, defaults);
      } else {
        defaults = SolrParams.wrapAppended(params, defaults);
      }
    }
    return defaults;
  }

