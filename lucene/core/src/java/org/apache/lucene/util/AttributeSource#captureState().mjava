  /**
   * Captures the state of all Attributes. The return value can be passed to
   * {@link #restoreState} to restore the state of this or another AttributeSource.
   */
  public final State captureState() {
    final State state = this.getCurrentState();
    return (state == null) ? null : (State) state.clone();
  }

