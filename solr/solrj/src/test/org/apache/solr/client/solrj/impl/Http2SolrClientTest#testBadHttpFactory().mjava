  @Test
  public void testBadHttpFactory() {
    System.setProperty(HttpClientUtil.SYS_PROP_HTTP_CLIENT_BUILDER_FACTORY, "FakeClassName");
    try {
      client = new Http2SolrClient.Builder(jetty.getBaseUrl().toString() + "/debug/foo").build();
      fail("Expecting exception");
    } catch (RuntimeException e ) {
      assertTrue(e.getMessage().contains("Unable to instantiate"));
    }
  }

