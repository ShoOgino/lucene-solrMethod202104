  public void testFactory() throws Exception {
    Token tokenA1 = new Token("One", 0, 2);
    Token tokenA3 = new Token("forty-two", 11, 13);
    Token tokenB1 = new Token("4-2", 15, 19);

    TokenStream ts = new CannedTokenStream(tokenA1, tokenA3, tokenB1);

    TokenFilterFactory tokenFilterFactory = tokenFilterFactory("patternTyping", Version.LATEST, new StringMockResourceLoader(
        "6 \\b(\\d+)-(\\d+) ::: $1_hnum_$2\n" +
        "2 \\b(\\w+)-(\\w+) ::: $1_hword_$2"
    ), "patternFile", "patterns.txt");

    ts = tokenFilterFactory.create(ts);
    assertTokenStreamContents(ts, new String[]{
            "One", "forty-two", "4-2"}, null, null,
        new String[]{"word", "forty_hword_two", "4_hnum_2"},
        null, null, null, null, null, false, null,
        new int[]{0, 2, 6});
  }

