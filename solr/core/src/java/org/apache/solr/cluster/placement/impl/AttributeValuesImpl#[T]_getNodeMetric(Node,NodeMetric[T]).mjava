  @Override
  @SuppressWarnings("unchecked")
  public <T> Optional<T> getNodeMetric(Node node, NodeMetric<T> metric) {
    Map<Node, Object> nodeToValue = metricSnitchToNodeToValue.get(metric);
    if (nodeToValue == null) {
      return Optional.empty();
    }
    return Optional.ofNullable((T) nodeToValue.get(node));
  }

