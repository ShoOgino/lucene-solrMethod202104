  @Override
  public void modifyRequest(ResponseBuilder rb, SearchComponent who, ShardRequest sreq) {
    if (!isComponentEnabled(rb)) {
      return;
    }

    // Make sure the component is enabled for shard request.
    assert sreq.params.getBool(COMPONENT_NAME, false) :
        "Shard request should propagate clustering component enabled state?";

    // Piggyback collecting inputs for clustering on top of get fields request.
    if ((sreq.purpose & ShardRequest.PURPOSE_GET_FIELDS) != 0) {
      sreq.params.set(REQUEST_PARAM_COLLECT_INPUTS, true);
    }
  }

