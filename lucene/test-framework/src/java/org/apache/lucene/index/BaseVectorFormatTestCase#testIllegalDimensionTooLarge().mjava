  public void testIllegalDimensionTooLarge() throws Exception {
    try (Directory dir = newDirectory();
        IndexWriter w = new IndexWriter(dir, newIndexWriterConfig())) {
      Document doc = new Document();
      expectThrows(
          IllegalArgumentException.class,
          () ->
              doc.add(
                  new VectorField(
                      "f",
                      new float[VectorValues.MAX_DIMENSIONS + 1],
                      VectorValues.SearchStrategy.DOT_PRODUCT_HNSW)));

      Document doc2 = new Document();
      doc2.add(new VectorField("f", new float[1], VectorValues.SearchStrategy.EUCLIDEAN_HNSW));
      w.addDocument(doc2);
    }
  }

