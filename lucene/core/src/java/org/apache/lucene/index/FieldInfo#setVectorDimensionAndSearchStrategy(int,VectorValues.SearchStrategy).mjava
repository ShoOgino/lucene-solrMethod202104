  /** Record that this field is indexed with vectors, with the specified num of dimensions and distance function */
  public void setVectorDimensionAndSearchStrategy(int dimension, VectorValues.SearchStrategy searchStrategy) {
    if (dimension < 0) {
      throw new IllegalArgumentException("vector dimension must be >= 0; got " + dimension);
    }
    if (dimension > VectorValues.MAX_DIMENSIONS) {
      throw new IllegalArgumentException("vector dimension must be <= VectorValues.MAX_DIMENSIONS (=" + VectorValues.MAX_DIMENSIONS + "); got " + dimension);
    }
    if (dimension == 0 && searchStrategy != VectorValues.SearchStrategy.NONE) {
      throw new IllegalArgumentException("vector search strategy must be NONE when the vector dimension = 0; got " + searchStrategy);
    }
    if (vectorDimension != 0 && vectorDimension != dimension) {
      throw new IllegalArgumentException("cannot change vector dimension from " + vectorDimension + " to " + dimension + " for field=\"" + name + "\"");
    }
    if (vectorSearchStrategy != VectorValues.SearchStrategy.NONE && vectorSearchStrategy != searchStrategy) {
      throw new IllegalArgumentException("cannot change vector search strategy from " + vectorSearchStrategy + " to " + searchStrategy + " for field=\"" + name + "\"");
    }

    this.vectorDimension = dimension;
    this.vectorSearchStrategy = searchStrategy;

    assert checkConsistency();
  }

