  public static Slice[] getSlices(String collectionName, ZkStateReader zkStateReader, boolean checkAlias) throws IOException {
    ClusterState clusterState = zkStateReader.getClusterState();

    // check for alias or collection

    List<String> allCollections = new ArrayList<>();
    String[] collectionNames = collectionName.split(",");
    Aliases aliases = checkAlias ? zkStateReader.getAliases() : null;

    for(String col : collectionNames) {
      List<String> collections = (aliases != null)
          ? aliases.resolveAliases(col)  // if not an alias, returns collectionName
          : Collections.singletonList(collectionName);
      allCollections.addAll(collections);
    }

    // Lookup all actives slices for these collections
    List<Slice> slices = allCollections.stream()
        .map(c -> clusterState.getCollectionOrNull(c, true))
        .filter(Objects::nonNull)
        .flatMap(docCol -> Arrays.stream(docCol.getActiveSlicesArr()))
        .collect(Collectors.toList());
    if (!slices.isEmpty()) {
      return slices.toArray(new Slice[0]);
    }

    throw new IOException("Slices not found for " + collectionName);
  }

