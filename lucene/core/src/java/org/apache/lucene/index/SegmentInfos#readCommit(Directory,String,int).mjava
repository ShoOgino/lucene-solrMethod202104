  static final SegmentInfos readCommit(
      Directory directory, String segmentFileName, int minSupportedMajorVersion)
      throws IOException {

    long generation = generationFromSegmentsFileName(segmentFileName);
    // System.out.println(Thread.currentThread() + ": SegmentInfos.readCommit " + segmentFileName);
    try (ChecksumIndexInput input = directory.openChecksumInput(segmentFileName, IOContext.READ)) {
      try {
        return readCommit(directory, input, generation, minSupportedMajorVersion);
      } catch (EOFException | NoSuchFileException | FileNotFoundException e) {
        throw new CorruptIndexException(
            "Unexpected file read error while reading index.", input, e);
      }
    }
  }

