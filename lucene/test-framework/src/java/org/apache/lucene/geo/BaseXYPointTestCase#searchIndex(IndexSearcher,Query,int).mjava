  private FixedBitSet searchIndex(IndexSearcher s, Query query, int maxDoc) throws IOException {
    final FixedBitSet hits = new FixedBitSet(maxDoc);
    s.search(query, new SimpleCollector() {

      private int docBase;

      @Override
      public ScoreMode scoreMode() {
        return ScoreMode.COMPLETE_NO_SCORES;
      }

      @Override
      protected void doSetNextReader(LeafReaderContext context)  {
        docBase = context.docBase;
      }

      @Override
      public void collect(int doc) {
        hits.set(docBase+doc);
      }
    });
    return hits;
  }

