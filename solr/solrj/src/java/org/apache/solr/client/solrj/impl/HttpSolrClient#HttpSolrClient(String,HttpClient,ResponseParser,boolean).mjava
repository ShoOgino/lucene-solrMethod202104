  /**
   * @deprecated use {@link Builder} instead.  This will soon be a 'protected'
   * method, and will only be available for use in implementing subclasses.
   */
  @Deprecated
  public HttpSolrClient(String baseURL, HttpClient client, ResponseParser parser, boolean allowCompression) {
    this.baseUrl = baseURL;
    if (baseUrl.endsWith("/")) {
      baseUrl = baseUrl.substring(0, baseUrl.length() - 1);
    }
    if (baseUrl.indexOf('?') >= 0) {
      throw new RuntimeException(
          "Invalid base url for solrj.  The base URL must not contain parameters: "
              + baseUrl);
    }
    
    if (client != null) {
      httpClient = client;
      internalClient = false;
    } else {
      internalClient = true;
      ModifiableSolrParams params = new ModifiableSolrParams();
      params.set(HttpClientUtil.PROP_FOLLOW_REDIRECTS, followRedirects);
      params.set(HttpClientUtil.PROP_ALLOW_COMPRESSION, allowCompression);
      httpClient = HttpClientUtil.createClient(params);
    }
    
    this.parser = parser;
  }

