  /** Input may contain orphan voiced marks that cannot be combined with the previous character. */
  public void testOrphanVoiceMark() throws Exception {
    CharFilter reader = new CJKWidthCharFilter(new StringReader("ｱﾞｨｯﾂ"));
    TokenStream ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"ア\u3099ィッツ"}, new int[] {0}, new int[] {5}, 5);

    reader = new CJKWidthCharFilter(new StringReader("ﾞｨｯﾂ"));
    ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"\u3099ィッツ"}, new int[] {0}, new int[] {4}, 4);

    reader = new CJKWidthCharFilter(new StringReader("ｱﾟﾅｿﾆｯｸ"));
    ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"ア\u309Aナソニック"}, new int[] {0}, new int[] {7}, 7);

    reader = new CJKWidthCharFilter(new StringReader("ﾟﾅｿﾆｯｸ"));
    ts = whitespaceMockTokenizer(reader);
    assertTokenStreamContents(ts, new String[] {"\u309Aナソニック"}, new int[] {0}, new int[] {6}, 6);
  }

