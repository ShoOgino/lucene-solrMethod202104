  public void testFreeDiskSuggestions() {
    String dataproviderdata = "{" +
        "  liveNodes:[node1,node2]," +
        "  replicaInfo : {" +
        "    node1:{}," +
        "    node2:{mycoll1:{" +
        "        shard1:[{r1:{type:NRT, INDEX.sizeInGB:900}}]," +
        "        shard2:[{r2:{type:NRT, INDEX.sizeInGB:300}}]," +
        "        shard3:[{r3:{type:NRT, INDEX.sizeInGB:200}}]," +
        "        shard4:[{r4:{type:NRT, INDEX.sizeInGB:100}}]}}}" +
        "    nodeValues : {" +
        "    node1: { node : node1 , cores:0 , freedisk : 2000}," +
        "    node2: { node : node2 , cores:4 , freedisk : 500}}}";


    String autoScalingjson = "  { cluster-policy:[" +
        "    { replica :'0', freedisk:'<1000'}," +
        "    { nodeRole : overseer, replica :0}]," +
        "  cluster-preferences :[{ minimize : cores, precision : 2 }]}";
    AutoScalingConfig cfg = new AutoScalingConfig((Map<String, Object>) Utils.fromJSONString(autoScalingjson));
    List<Violation> violations = cfg.getPolicy().createSession(cloudManagerWithData(dataproviderdata)).getViolations();
    assertEquals(1, violations.size());
    assertEquals(4, violations.get(0).getViolatingReplicas().size());
    List<Suggester.SuggestionInfo> l = PolicyHelper.getSuggestions(cfg, cloudManagerWithData(dataproviderdata));
    assertEquals(3, l.size());
    Map m = l.get(0).toMap(new LinkedHashMap<>());
    assertEquals("r4", Utils.getObjectByPath(m, true, "operation/command/move-replica/replica"));
    assertEquals("node1", Utils.getObjectByPath(m, true, "operation/command/move-replica/targetNode"));

    m = l.get(1).toMap(new LinkedHashMap<>());
    assertEquals("r3", Utils.getObjectByPath(m, true, "operation/command/move-replica/replica"));
    assertEquals("node1", Utils.getObjectByPath(m, true, "operation/command/move-replica/targetNode"));

    m = l.get(2).toMap(new LinkedHashMap<>());
    assertEquals("r2", Utils.getObjectByPath(m, true, "operation/command/move-replica/replica"));
    assertEquals("node1", Utils.getObjectByPath(m, true, "operation/command/move-replica/targetNode"));


  }

