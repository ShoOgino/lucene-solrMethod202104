  @Override
  public Object toObject(IndexableField f) {
    final Number val = f.numericValue();
    if (val != null) {
      return (type == TrieTypes.DATE) ? new Date(val.longValue()) : val;
    } else {
      // the following code is "deprecated" and only to support pre-3.2 indexes using the old BinaryField encoding:
      final BytesRef bytes = f.binaryValue();
      if (bytes==null) return badFieldString(f);
      switch (type) {
        case INTEGER:
          return toInt(bytes.bytes, bytes.offset);
        case FLOAT:
          return Float.intBitsToFloat(toInt(bytes.bytes, bytes.offset));
        case LONG:
          return toLong(bytes.bytes, bytes.offset);
        case DOUBLE:
          return Double.longBitsToDouble(toLong(bytes.bytes, bytes.offset));
        case DATE:
          return new Date(toLong(bytes.bytes, bytes.offset));
        default:
          throw new SolrException(SolrException.ErrorCode.SERVER_ERROR, "Unknown type for trie field: " + f.name());
      }
    }
  }

