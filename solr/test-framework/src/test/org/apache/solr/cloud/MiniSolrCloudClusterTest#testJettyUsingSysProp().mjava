  public void testJettyUsingSysProp() throws Exception {
    try {
      // this cluster will use a sysprop to communicate zkHost to it's nodes -- not node props in the servlet context
      final MiniSolrCloudCluster x = new MiniSolrCloudCluster(1, createTempDir(), JettyConfig.builder().build()) {
        @Override
        public JettySolrRunner startJettySolrRunner(String name, String hostContext, JettyConfig config) throws Exception {
          System.setProperty("zkHost", getZkServer().getZkAddress());
          
          final Properties nodeProps = new Properties();
          nodeProps.setProperty("test-from-sysprop", "yup");
          
          Path runnerPath = createTempDir(name);
          JettyConfig newConfig = JettyConfig.builder(config).setContext("/blarfh").build();
          JettySolrRunner jetty = new JettySolrRunner(runnerPath.toString(), nodeProps, newConfig);
          return super.startJettySolrRunner(jetty);
        }
      };
      try {
        // baseline check
        assertEquals(1, x.getJettySolrRunners().size());
        assertZkHost("x", x.getZkServer().getZkAddress(), x.getJettySolrRunners().get(0));
        
        // verify MiniSolrCloudCluster's impl didn't change out from under us making test useless
        assertEquals("yup", x.getJettySolrRunners().get(0).getNodeProperties().getProperty("test-from-sysprop"));
        assertNull(x.getJettySolrRunners().get(0).getNodeProperties().getProperty("zkHost"));
        
      } finally {
        x.shutdown();
      }
    }finally {
      System.clearProperty("zkHost");
    }
  }

