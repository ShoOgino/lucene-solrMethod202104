    /**
     * Gets the number of bits required to encode the value of the provided int.
     * Returns 0 for int value 0. Equivalent to (log2(i) + 1).
     */
    protected static int numBitsToEncode(int i) {
      return 32 - Integer.numberOfLeadingZeros(i);
    }

