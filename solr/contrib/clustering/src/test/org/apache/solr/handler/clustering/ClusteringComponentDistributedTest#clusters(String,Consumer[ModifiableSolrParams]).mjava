  private List<Cluster> clusters(String query, Consumer<ModifiableSolrParams> paramsConsumer) throws Exception {
    handle.clear();
    handle.put("responseHeader", SKIP);
    handle.put("response", SKIP);

    final ModifiableSolrParams params = new ModifiableSolrParams();
    params.add(CommonParams.Q, query);
    params.add(CommonParams.ROWS, "1000");
    params.add(CommonParams.SORT, id + " desc");
    params.add(ClusteringComponent.COMPONENT_NAME, "true");
    paramsConsumer.accept(params);

    QueryResponse response = query(true, params);

    ClusteringResponse clusteringResponse = response.getClusteringResponse();
    Assert.assertNotNull(clusteringResponse);

    return clusteringResponse.getClusters();
  }

