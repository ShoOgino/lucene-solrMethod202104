  /**
   * Remove all collections.
   */
  public void simDeleteAllCollections() throws Exception {
    lock.lockInterruptibly();
    try {
      nodeReplicaMap.clear();
      colShardReplicaMap.clear();
      collProperties.clear();
      sliceProperties.clear();
      leaderThrottles.clear();
      cloudManager.getSimNodeStateProvider().simGetAllNodeValues().forEach((n, values) -> {
        values.put(ImplicitSnitch.CORES, 0);
        values.put(ImplicitSnitch.DISK, 1000);
      });
      collectionsStatesRef.set(null);
      saveClusterState.set(true);
    } finally {
      lock.unlock();
    }
  }

