  /**
   * A phaser that will advance phases every time {@link #setDelegate(ClusterEventProducer)} is called.
   * Useful for allowing tests to know when a new delegate is finished getting set.
   */
  @VisibleForTesting
  public void setDelegationPhaser(Phaser phaser) {
    phaser.register();
    this.phaser = phaser;
  }

