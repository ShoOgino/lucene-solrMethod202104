  private void populateAlgorithmParameters(Query query, EngineParameters requestParameters, ClusteringAlgorithm algorithm) {
    LinkedHashMap<String, String> attrs = requestParameters.otherParameters();
    // Set the optional query hint. We extract just the terms
    if (!attrs.containsKey("queryHint")) {
      Set<String> termSet = new LinkedHashSet<>();
      query.visit(new QueryVisitor() {
        @Override
        public void consumeTerms(Query query, Term... terms) {
          for (Term t : terms) {
            termSet.add(t.text());
          }
        }
      });
      attrs.put("queryHint", String.join(" ", termSet));
    }
    algorithm.accept(new FlatKeysAttrVisitor(attrs));
  }

