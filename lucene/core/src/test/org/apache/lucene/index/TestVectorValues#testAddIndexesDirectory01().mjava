  public void testAddIndexesDirectory01() throws Exception {
    String fieldName = "field";
    float[] vector = new float[1];
    Document doc = new Document();
    doc.add(new VectorField(fieldName, vector, ScoreFunction.DOT_PRODUCT));
    try (Directory dir = newDirectory();
         Directory dir2 = newDirectory()) {
      try (IndexWriter w = new IndexWriter(dir, createIndexWriterConfig())) {
        w.addDocument(doc);
      }
      try (IndexWriter w2 = new IndexWriter(dir2, createIndexWriterConfig())) {
        vector[0] = 1;
        w2.addDocument(doc);
        w2.addIndexes(new Directory[]{dir});
        w2.forceMerge(1);
        try (IndexReader reader = w2.getReader()) {
          LeafReader r = reader.leaves().get(0).reader();
          VectorValues vectorValues = r.getVectorValues(fieldName);
          assertEquals(0, vectorValues.nextDoc());
          assertEquals(1, vectorValues.vectorValue()[0], 0);
          assertEquals(1, vectorValues.nextDoc());
          assertEquals(0, vectorValues.vectorValue()[0], 0);
        }
      }
    }
  }

