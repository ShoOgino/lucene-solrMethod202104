  public static MetricsConfiguration from(Document config) throws Exception {
    Node settings = getNode(config, "/config/settings");

    Node pingConfig = getNode(config, "/config/rules/ping");
    Node metricsConfig = getNode(config, "/config/rules/metrics");
    Node collectionsConfig = getNode(config, "/config/rules/collections");
    Node searchConfiguration = getNode(config, "/config/rules/search");

    return new MetricsConfiguration(
        settings == null ? PrometheusExporterSettings.builder().build() : PrometheusExporterSettings.from(settings),
        toMetricQueries(pingConfig),
        toMetricQueries(metricsConfig),
        toMetricQueries(collectionsConfig),
        toMetricQueries(searchConfiguration)
    );
  }

