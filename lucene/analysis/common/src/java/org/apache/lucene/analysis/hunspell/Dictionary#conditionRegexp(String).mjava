  private static RegExp conditionRegexp(String regex) {
    try {
      return new RegExp(regex, RegExp.NONE);
    } catch (IllegalArgumentException e) {
      if (e.getMessage().contains("expected ']'")) {
        return conditionRegexp(regex + "]");
      }
      throw e;
    }
  }

